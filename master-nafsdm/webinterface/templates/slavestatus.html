{% extends "layout.html" %}
{% block title %} - slavestatus{% endblock %}
{% block navbar %}
          <li><a href="/">Home</a></li>
          <li><a href="/domains">Domains</a></li>
          <li class="active"><a href="/slavestatus">Slavestatus</a></li>
          <li><a href="/settings">Settings</a></li>
{% endblock %}
{% block actions %}<a href="/api/slaveFlush"><button type="button" class="btn btn-primary btn-sm">Flush slavestatus</button></a> <button type="button" class="btn btn-primary btn-sm" onclick="reloadPage()">Reload page</button>{% endblock %}
{% block content %}
        <h1>nafsdm webinterface - slavestatus</h1>
        <p>List of slaves connected to this master.</p>
        <!-- if flags -->
        {% if flushSuccess %}
        <p><font color="green">Successfully flushed slavestatus!</font> <a href="/slavestatus"><button type="button" class="btn btn-primary btn-sm">Dismiss</button></a></p>
        {% endif %}

        {% if fail %}
        <font color="red"><p>Failure during flush process!</p></font>
        {% endif %}
        <!-- end if flags -->
        <hr>
        <h3>Slavestatus</h1>
        <!-- Slavestatus list table -->
        <table class="table table-bordered">
          <tr>
            <td>Hostname</td>
            <td>Latest Connection</td>
            <td>Latest Connection Date</td>
            <td>Interval</td>
          </tr>
        {% for slave in slaves %}
          {% if slave[4] %}
          <tr id="{{ slave[0] }}">
            <td>[<font color="red"><b>!</b></font>] {{ slave[0] }}</td><!-- Hostname -->
            <td><font color="red">{{ slave[1] }}</font></td><!-- Latest Connection -->
            <td>{{ slave[2] }}</td><!-- Latest Connection Date -->
            <td>{{ slave[3] }}</td><!-- Interval -->
          </tr>
          {% else %}
          <tr id="{{ slave[0] }}">
            <td>{{ slave[0] }}</td><!-- Hostname -->
            <td><font color="green">{{ slave[1] }}</font></td><!-- Latest Connection -->
            <td>{{ slave[2] }}</td><!-- Latest Connection Date -->
            <td>{{ slave[3] }}</td><!-- Interval -->
          </tr>
          {% endif %}
        {% endfor %}
        </table>
        <!-- end Slavestatus list table -->
{% endblock %}
